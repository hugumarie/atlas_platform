#\!/bin/bash

echo "üöÄ D√âPLOIEMENT ATLAS PRODUCTION"
echo "================================"
echo ""

# V√©rifier que nous avons le bon commit
echo "üìã Commit actuel local:"
git log --oneline -1

echo ""
echo "üîç Vous devez maintenant vous connecter au serveur et ex√©cuter:"
echo ""
echo "ssh root@atlas-invest.fr"
echo ""
echo "Puis, une fois connect√©, ex√©cutez:"
echo ""
echo "# 1. Aller dans le r√©pertoire Atlas"
echo "cd /opt/atlas"
echo ""
echo "# 2. V√©rifier l'√©tat actuel"
echo "git status"
echo "git log --oneline -1"
echo ""
echo "# 3. Pull les derni√®res modifications"
echo "git pull origin main"
echo ""
echo "# 4. V√©rifier le nouveau commit"
echo "git log --oneline -1"
echo ""
echo "# 5. D√©ployer avec Dokku"
echo "dokku git:sync atlas /opt/atlas"
echo "dokku ps:rebuild atlas"
echo ""
echo "# 6. V√©rifier le d√©ploiement"
echo "dokku logs atlas --tail"
echo ""
echo "# 7. Tester l'application"
echo "curl -I https://atlas-invest.fr"
echo ""
echo "‚úÖ Si tout fonctionne, le d√©ploiement est termin√© \!"
echo ""
echo "üîß En cas de probl√®me:"
echo "dokku ps:restart atlas"
echo "dokku logs atlas --tail --num 50"

